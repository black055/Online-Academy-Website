<div style="display: flex;margin: 150px 100px 100px 100px;" id="lecture">
    <div class="video">
        <div class="course_title">{{course.name}}</div>
        <h3>Giáo viên: <a href="#" id="teacher">Lê Thành Việt</a></h3>
        <h4 style="margin-bottom: 20px;">Lĩnh vực: <a href="#" id="category">Lập trình Web</a></h4>
        <video controls crossorigin playsinline poster={{course.thumbnail}} class="js-player" id="video_chapter">
            <source src="{{url}}" type="video/mp4" />
        </video>
        <h3>{{title}}</h3>
    </div>

    <ul class="dropdowns" style="margin-left:50px; margin-top:60px;" id="chapters">
        {{#each course.chapters}}
        <li id="chapter_{{@index}}">
            <div class="dropdown_item">
                <a href="/courses/{{../course._id}}/{{@index}}"><div class="dropdown_item_title">{{this.title}}</div></a>
                <div class="dropdown_item_text">
                    <p><a href="/courses/{{../course._id}}/{{@index}}" style="text-decoration: none;"><i class="far fa-play-circle" style="margin-right: 10px;"></i>{{this.title}}</a></p>
                </div>
            </div>
        </li>
        {{/each}}
    </ul>
</div>

{{#section 'css'}}
<link rel="stylesheet" href="https://cdn.plyr.io/3.5.6/plyr.css" />
<link rel="stylesheet" type="text/css" href="/styles/course.css">
<link rel="stylesheet" type="text/css" href="/styles/course_responsive.css">
<style>
    .plyr {
        width: 1200px;
        margin-bottom: 20px;
    }

    #category {
        margin-left: 10px;
        font-weight:100 !important;
        color: #384158;
    }

    #teacher {
        margin-left: 10px;
        font-weight:100 !important;
        color: #384158;
    }

    #category:hover {
        color: #14bdee;
    }

    #teacher:hover {
        color: #14bdee;
    }

    @media only screen and (max-width: 1530px) {
        #lecture {
            display: block !important;
        }

        #chapters {
            margin-left: 0px !important;
            margin-top: 0px !important;
        }
    }

    @media only screen and (max-width: 800px) {
        #lecture {
            margin: 75px 50px 50px 50px !important;
        }
    }
</style>
{{/section}}

{{#section 'js'}}
<script src="https://cdn.plyr.io/3.5.6/plyr.js"></script>
<script src="/js/course.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const player = new Plyr('.js-player', {
            autoplay: true,
        });
    });

    if (!{{registered}}) {
        {{#each course.chapters}}
        if ({{@index}} > 1) {
            $(`#chapter_{{@index}}`).css('pointer-events', 'none');
        }
        {{/each}}
    }

    var video = document.getElementById('video_chapter');
    const item = '{{session.user._id}}' + '{{url}}';
    console.log(item);
    if (localStorage.hasOwnProperty(item)) {
        video.currentTime = localStorage.getItem(item);
    }

    setInterval(() => {
        localStorage.setItem(item, video.currentTime);
    },1000);
</script>
{{/section}}